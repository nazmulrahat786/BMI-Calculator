<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BMI Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
@keyframes spin {from {transform: rotate(0deg);} to {transform: rotate(360deg);}}
.animate-spin {animation: spin 1s linear infinite;}
.bmi-result-container {transition: all 0.5s ease-out; transform: translateY(10px); opacity: 0; max-height: 0; overflow: hidden; padding-top: 0;}
.bmi-result-container.show {transform: translateY(0); opacity: 1; max-height: 500px; padding-top: 1rem;}
#ai-tips-container {transition: all 0.5s ease-out; opacity: 0; transform: translateY(10px); max-height: 0; overflow: hidden; padding-top: 0;}
#ai-tips-container.show {opacity: 1; transform: translateY(0); max-height: 500px; padding-top: 1rem;}
#ai-tips-content {font-size: 0.95rem; color: #047857;}
</style>
<script>
tailwind.config = {theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'] }, colors: { 'primary-indigo': '#4f46e5', 'secondary-green': '#10b981' }}}};
function clearResult() {
    document.getElementById('result-box').classList.remove('show');
    document.getElementById('ai-tips-container').classList.remove('show');
    document.getElementById('bmi-value').textContent = '--';
    const badge = document.getElementById('category-badge');
    badge.textContent = '--';
    badge.className = 'px-3 py-1 text-sm rounded-full shadow-md';
    document.getElementById('age-display').textContent = '--';
    document.getElementById('ai-tips-content').textContent = '';
    document.getElementById('ai-header-text').textContent = 'Health Coach Advice';
    document.getElementById('height-error').classList.add('hidden');
    document.getElementById('weight-error').classList.add('hidden');
    document.getElementById('age-error').classList.add('hidden');
    document.getElementById('download-btn').classList.add('hidden');
}
function validateInput(id, value, min, max) {
    const errorElement = document.getElementById(`${id}-error`);
    if (isNaN(value) || value < min || value > max) {errorElement.classList.remove('hidden'); return false;}
    errorElement.classList.add('hidden'); return true;
}
function calculateBMI() {
    clearResult();
    const heightCm = parseFloat(document.getElementById('height').value);
    const weightKg = parseFloat(document.getElementById('weight').value);
    const age = parseInt(document.getElementById('age').value);
    let isValid = true;
    if (!validateInput('height', heightCm, 100, 250)) isValid = false;
    if (!validateInput('weight', weightKg, 20, 300)) isValid = false;
    if (!validateInput('age', age, 5, 120)) isValid = false;
    if (!isValid) return;
    const heightM = heightCm / 100;
    const bmi = weightKg / (heightM * heightM);
    const formattedBmi = bmi.toFixed(1);
    let categoryText='', categoryClass='';
    if (bmi<18.5){categoryText='Underweight'; categoryClass='bg-blue-200 text-blue-800';}
    else if(bmi<25){categoryText='Normal Weight'; categoryClass='bg-green-200 text-green-800';}
    else if(bmi<30){categoryText='Overweight'; categoryClass='bg-yellow-200 text-yellow-800';}
    else{categoryText='Obesity'; categoryClass='bg-red-200 text-red-800';}
    document.getElementById('bmi-value').textContent=formattedBmi;
    const badge=document.getElementById('category-badge');
    badge.textContent=categoryText;
    badge.className=`px-3 py-1 text-sm rounded-full font-bold shadow-md ${categoryClass}`;
    badge.dataset.category=categoryText;
    document.getElementById('age-display').textContent=age;
    document.getElementById('result-box').classList.add('show');
    document.getElementById('bmi-bar').style.width = Math.min((bmi/40)*100,100)+'%';
    document.getElementById('bmi-bar').className = `h-3 rounded-full transition-all duration-500 ${categoryClass}`;
    updateHistory(formattedBmi, categoryText, age);
    fetchHealthTips(categoryText, age);
    document.getElementById('download-btn').classList.remove('hidden');
}
function fetchHealthTips(category, age) {
    const contentDiv=document.getElementById('ai-tips-content');
    const tipsContainer=document.getElementById('ai-tips-container');
    const headerText=document.getElementById('ai-header-text');
    const tips={
        'Underweight':['Eat nutrient-dense meals','Include protein daily','Strength train 2x/week','Avoid empty calories','Rest well'],
        'Normal Weight':['Maintain balanced diet','Exercise regularly','Stay hydrated','Sleep 7-8 hrs','Check health periodically'],
        'Overweight':['Control portion sizes','Exercise 4-5x/week','Eat more vegetables','Limit sugary drinks','Track progress'],
        'Obesity':['Consult a professional','Start moderate exercise','Follow structured diet','Avoid processed foods','Regular monitoring']
    };
    contentDiv.innerHTML=tips[category].map(tip=>`<p>• ${tip}</p>`).join('');
    headerText.textContent=`Health Coach Advice (Age: ${age})`;
    tipsContainer.classList.add('show');
}
function downloadReport() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text('BMI Health Report', 105, 20, null, null, 'center');
    doc.setLineWidth(0.5);
    doc.line(20, 25, 190, 25);
    doc.setFontSize(12);
    doc.text(`Age: ${document.getElementById('age-display').textContent}`, 20, 40);
    doc.text(`BMI: ${document.getElementById('bmi-value').textContent}`, 20, 50);
    doc.text(`Category: ${document.getElementById('category-badge').textContent}`, 20, 60);
    doc.text('Health Tips:', 20, 75);
    const tips = document.getElementById('ai-tips-content').innerText.split('\n');
    tips.forEach((tip, i) => doc.text(`• ${tip}`, 25, 85 + i * 8));
    doc.setDrawColor(0, 0, 0);
    doc.rect(15, 30, 180, 60 + tips.length*8);
    doc.setFontSize(10);
    doc.text('Generated by BMI & Health Coach App || Developed by Nazmul Haque Rahat ', 105, 280, null, null, 'center');
    doc.save('BMI_Report.pdf');
}
function updateHistory(bmi, category, age) {
    const historyList = document.getElementById('history-list');
    const historyContainer = document.getElementById('history-container');
    const li = document.createElement('li');
    li.textContent = `Age: ${age}, BMI: ${bmi}, Category: ${category}`;
    historyList.prepend(li);
    historyContainer.classList.remove('hidden');
}
window.onload=clearResult;
</script>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-100 flex items-center justify-center min-h-screen p-2 font-sans">
<div class="w-full max-w-md bg-white p-6 sm:p-8 rounded-3xl shadow-2xl transition duration-300">
<h1 class="text-2xl sm:text-3xl font-extrabold text-gray-900 mb-6 text-center border-b-2 border-primary-indigo/10 pb-3">BMI & Health Coach</h1>
<div id="input-fields" class="space-y-4 sm:space-y-6">
<div>
<label for="age" class="block text-sm font-semibold text-gray-700 mb-1">Age (years)</label>
<input type="number" id="age" placeholder="e.g., 25" min="5" max="120" inputmode="numeric" class="w-full px-3 py-2 sm:py-3 border border-gray-300 rounded-xl shadow-inner focus:border-primary-indigo focus:ring-2 focus:ring-primary-indigo/50 outline-none transition duration-150">
<p id="age-error" class="text-sm text-red-600 mt-1 hidden">Enter valid age (5-120)</p>
</div>
<div>
<label for="height" class="block text-sm font-semibold text-gray-700 mb-1">Height (cm)</label>
<input type="number" id="height" placeholder="e.g., 175" min="100" max="250" inputmode="numeric" class="w-full px-3 py-2 sm:py-3 border border-gray-300 rounded-xl shadow-inner focus:border-primary-indigo focus:ring-2 focus:ring-primary-indigo/50 outline-none transition duration-150">
<p id="height-error" class="text-sm text-red-600 mt-1 hidden">Enter valid height (100-250 cm)</p>
</div>
<div>
<label for="weight" class="block text-sm font-semibold text-gray-700 mb-1">Weight (kg)</label>
<input type="number" id="weight" placeholder="e.g., 70" min="20" max="300" inputmode="decimal" class="w-full px-3 py-2 sm:py-3 border border-gray-300 rounded-xl shadow-inner focus:border-primary-indigo focus:ring-2 focus:ring-primary-indigo/50 outline-none transition duration-150">
<p id="weight-error" class="text-sm text-red-600 mt-1 hidden">Enter valid weight (20-300 kg)</p>
</div>
<div class="space-y-3 sm:space-y-4 mt-4">
<button onclick="calculateBMI()" class="w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent rounded-xl shadow-lg text-lg sm:text-xl font-bold text-white bg-primary-indigo hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 transition duration-150 ease-in-out transform hover:scale-[1.01] active:scale-[0.99]">Calculate BMI & Tips</button>
<button onclick="clearResult()" class="w-full flex justify-center py-2 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-md text-lg sm:text-xl font-semibold text-gray-700 bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 transition duration-150 ease-in-out">Reset</button>
<button id="download-btn" onclick="downloadReport()" class="w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent rounded-xl shadow-md text-lg sm:text-xl font-semibold text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 transition duration-150 ease-in-out hidden">Download Report</button>
</div>
</div>
<div class="bmi-result-container mt-4 sm:mt-6 bg-indigo-50/50 p-4 rounded-xl border border-indigo-100" id="result-box">
<h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-1">Your Results:</h2>
<div class="flex justify-between items-center">
<div>
<div id="bmi-value" class="text-4xl sm:text-6xl font-extrabold text-primary-indigo">--</div>
<p class="text-lg sm:text-xl mt-1 font-semibold text-gray-700 flex items-center"><span class="mr-2">Category:</span><span id="category-badge" class="px-3 py-1 text-sm rounded-full shadow-md">--</span></p>
<div class="w-full bg-gray-200 rounded-full h-3 mt-3">
<div id="bmi-bar" class="h-3 rounded-full transition-all duration-500" style="width:0%;"></div>
</div>
</div>
<div>
<p class="text-sm text-gray-600 mt-2 sm:mt-0">Age: <span id="age-display">--</span></p>
</div>
</div>
</div>
<div id="ai-tips-container" class="mt-4 sm:mt-6">
<div class="p-4 sm:p-6 bg-secondary-green/5 border border-secondary-green/20 rounded-xl shadow-inner">
<h3 class="text-lg sm:text-xl font-bold text-secondary-green mb-2 flex items-center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5 mr-2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-.83 0-1.5-.67-1.5-1.5V9.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v3.5c0 .83-.67 1.5-1.5 1.5z"/></svg>
<span id="ai-header-text">Health Coach Advice</span>
</h3>
<div id="ai-tips-content"></div>
</div>
</div>
<div id="history-container" class="mt-4 hidden">
<h3 class="font-bold text-gray-800 mb-2">History:</h3>
<ul id="history-list" class="list-disc list-inside text-gray-700"></ul>
</div>
<div class="text-center mt-6 text-gray-500 text-sm">
Developed by <span class="font-semibold"><a href="https://nazmul-haque-rahat.web.app/"  >Nazmul Haque Rahat</a></span>
</div>
</div>
</body>
</html>
